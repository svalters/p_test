var e,t,a=Object.defineProperty,n=Object.defineProperties,l=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&o(e,a,t[a]);if(r)for(var a of r(t))i.call(t,a)&&o(e,a,t[a]);return e},c=(e,t)=>n(e,l(t)),d=(e,t)=>{var a={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&r)for(var n of r(e))t.indexOf(n)<0&&i.call(e,n)&&(a[n]=e[n]);return a};import{r as m,R as p,T as f,C as g,u as b,a as E,b as v,c as h,d as x,e as q,B as y,S as w,f as N,Q as I,g as z,h as S,i as $}from"./vendor.9f3eacdf.js";(t=e||(e={})).info="info",t.success="success";const O=m.exports.createContext((e=>{})),j=({children:t})=>{const[a,n]=m.exports.useState([]),l=m.exports.useCallback((t=>{const a=u({id:Date.now(),type:e.info},t);n((e=>[...e,a])),setTimeout((()=>n((e=>e.filter((e=>e.id!==a.id))))),3e3)}),[]);return p.createElement(O.Provider,{value:l},t,p.createElement(f,{className:"absolute top-0 right-0 w-full max-w-md p-6"},a.map((({id:t,message:a,type:n})=>p.createElement(g,{key:t.toString(),classNames:"slide",timeout:{enter:300,exit:150}},p.createElement("div",{className:"text-white px-6 py-4 border-0 rounded relative mb-4 w-full shadow-lg opacity-90 "+(n===e.success?"bg-green-300":"bg-gray-400")},p.createElement("span",{className:"font-semibold mr-8"},a)))))))},k={"Content-Type":"application/json"},C=e=>fetch(e,{method:"GET",headers:k}).then((e=>e.json())),L=(e,t)=>fetch(e,{method:"POST",body:JSON.stringify(t),headers:k}).then((e=>e.json())),Q="https://printful.com/test-quiz.php",D=()=>C(`${Q}?action=quizzes`),P=e=>L("/api/test",e),T=()=>{const e=v();return E(P,{onSuccess:t=>{e.setQueryData(["test",t.id],t)}})},F=({isLoading:e=!1,showLoader:t=!0,children:a})=>p.createElement(p.Fragment,null,e&&t&&p.createElement("div",{className:"absolute inset-0 w-full h-full flex flex-auto justify-center items-center"},p.createElement("div",{className:"h-5 w-5 bg-gray-400 rounded-full mr-3 animate-bounce"}),p.createElement("div",{className:"h-5 w-5 bg-gray-400 rounded-full mr-3 animate-bounce200"}),p.createElement("div",{className:"h-5 w-5 bg-gray-400 rounded-full animate-bounce400"})),p.createElement(g,{in:!e,appear:!e,timeout:{enter:300,exit:0},classNames:"slide",unmountOnExit:!0,mountOnEnter:!0},p.createElement(p.Fragment,null,a))),A=e=>{var t=e,{children:a}=t,n=d(t,["children"]);return p.createElement("button",u({className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow whitespace-nowrap disabled:opacity-50 disabled:hover:bg-white"},n),a)},R=()=>{var e;const t=h(),{data:a,isLoading:n}=b("quizzes",D,l);var l;const{mutateAsync:r}=T(),{register:s,handleSubmit:i,setFocus:o,formState:{errors:c,isDirty:d,isSubmitting:f}}=x({mode:"onChange"});m.exports.useEffect((()=>{!n&&o("name")}),[o,n]);return p.createElement(F,{isLoading:n},p.createElement("div",{className:"max-w-sm shadow-lg rounded p-6"},p.createElement("form",{onSubmit:i((e=>r(e).then((e=>t.push(`/${null==e?void 0:e.id}/quiz/${null==e?void 0:e.quizId}/question`)))))},p.createElement("label",{className:"block"},p.createElement("span",{className:"text-gray-700"},"Name *"),p.createElement("input",u({type:"text",placeholder:"Enter your name",className:"w-full px-1 border-0 border-b-2 border-gray-200 focus:ring-0 focus:border-black"},s("name",{required:!0}))),p.createElement("div",{className:"mb-6 relative"},"required"===(null==(e=null==c?void 0:c.name)?void 0:e.type)&&p.createElement("p",{className:"absolute top-0 text-red-500 text-xs italic !mt-1"},"Name is required"))),p.createElement("label",{className:"block"},p.createElement("span",{className:"text-gray-700"},"Choose quiz"),p.createElement("select",u({className:"w-full px-1 border-0 border-b-2 border-gray-200 focus:ring-0 focus:border-black"},s("quizId",{required:!0})),(null!=a?a:[]).map((({id:e,title:t})=>p.createElement("option",{key:null==e?void 0:e.toString(),value:e},t))))),p.createElement("div",{className:"flex flex-col mt-6"},p.createElement(A,{type:"submit",disabled:n||!d||f},"Start")))))},B=({id:e},t)=>b(["test",e],(()=>(({id:e})=>C(`/api/test/${e}`))({id:e})),t),M=({quizId:e},t)=>b(["questions",e],(()=>(({quizId:e})=>C(`${Q}?action=questions&quizId=${e}`))({quizId:e})),t),G=({id:e,data:t})=>L(`/api/test/${e}/progress`,t),J=({quizId:e,questionId:t},a)=>b(["answers",e,t],(()=>(({quizId:e,questionId:t})=>C(`${Q}?action=answers&quizId=${e}&questionId=${t}`))({quizId:e,questionId:t})),a),W=({onSubmit:e,quizId:t,questionId:a})=>{const{data:n,isLoading:l}=J({quizId:Number(t),questionId:Number(a)},{enabled:!!a}),{handleSubmit:r,register:s,reset:i,formState:{isDirty:o,isSubmitting:c}}=x({mode:"onChange"});return m.exports.useEffect((()=>{i()}),[i,a]),p.createElement("form",{onSubmit:r(e),className:"w-full h-full flex flex-col"},p.createElement(F,{isLoading:l||c},p.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-6 w-full"},(null!=n?n:[]).map((e=>p.createElement("div",{key:e.id.toString(),className:"rounded shadow-lg w-full my-2"},p.createElement("label",{className:"flex items-center cursor-pointer"},p.createElement("div",{className:"bg-gray-200 flex p-4"},p.createElement("input",u({type:"radio",value:e.id.toString()},s("answerId",{required:!0})))),p.createElement("span",{className:"ml-4"},e.title))))))),p.createElement("div",{className:"flex flex-grow"}),p.createElement("div",{className:"flex flex-col pt-12"},p.createElement(A,{type:"submit",disabled:l||!o||c},"Submit Answer")))},Y=({total:e,lastQuestionIndex:t})=>{const a=e>0?t/e*100:0;return p.createElement("div",{className:"flex w-full items-center"},p.createElement("div",{className:"flex flex-grow overflow-hidden h-2 bg-gray-100 rounded"},p.createElement("div",{style:{width:`${a}%`},className:"bg-green-300 transition-all duration-500 ease-in-out"})),p.createElement("p",{className:"font-bold ml-6"},Math.round(a),"%"))},H=()=>{var t,a,n,l,r;const s=h(),{id:i,quizId:o,questionId:f}=q(),g=m.exports.useContext(O),b=(()=>{const e=v();return E(G,{onSuccess:({progress:t,answer:a})=>{e.setQueryData(["test",t.testId],(e=>{if(e)return c(u({},e),{progress:u(u({},e.progress),t),answers:[...e.answers,a]})}))}})})(),x=B({id:String(i)}),{data:y,isLoading:w}=x,{data:N,isLoading:I}=(d(x,["data","isLoading"]),M({quizId:Number(o)})),z=(N||[]).findIndex((e=>e.id===Number(f))),S=z>=0?z:0,$=null==(t=null==y?void 0:y.progress)?void 0:t.lastQuestionId,j=f?null==N?void 0:N[z]:null==N?void 0:N[null!=$?$:0],k=null!=(n=null==(a=null==N?void 0:N[S+1])?void 0:a.id)?n:null==j?void 0:j.id,L=()=>{S>=(null!=N?N:[]).length-1?s.push(`/${i}/quiz/${o}/result`):s.push(`/${i}/quiz/${o}/question/${k}`)};return m.exports.useEffect((()=>{const e=!w&&!I;!e||y&&(j||$)?e&&(null==y?void 0:y.quizId)&&!j&&$&&s.push(`/${i}/quiz/${null==y?void 0:y.quizId}/question/${$}`):s.push("/")}),[s,w,I]),p.createElement(p.Fragment,null,p.createElement("div",{className:"flex flex-grow items-end w-full h-full"},p.createElement(F,{isLoading:I},p.createElement("h2",{className:"!mt-0"},null==j?void 0:j.title))),p.createElement("div",{className:"flex flex-grow items-start w-full h-full pt-12"},p.createElement(W,{onSubmit:t=>{var a;return(({quizId:e,answers:t})=>{const a=(e=>e.map((e=>`answers[]=${e.answerId}`)).join("&"))(t);return C(`${Q}?action=submit&quizId=${e}&${a}`)})({quizId:String(o),answers:[...null!=(a=null==y?void 0:y.answers)?a:[],{answerId:t.answerId}]}).then((e=>b.mutateAsync({id:String(i),data:c(u(u({},t),e),{questionId:Number(f),lastQuestionId:k&&Number(k)})}))).then((({answerCorrect:t})=>{g(t?{message:"Correct!",type:e.success}:{message:"Better luck next time!"})})).then(L)},quizId:Number(o),questionId:null==j?void 0:j.id})),p.createElement(Y,{total:null!=(r=null==(l=null==y?void 0:y.progress)?void 0:l.total)?r:0,lastQuestionIndex:S}))},K=()=>{var e,t;const a=h(),{id:n}=q(),{data:l,isLoading:r}=B({id:n}),{mutateAsync:s}=T();return m.exports.useEffect((()=>{r||l||a.push("/")}),[a,r]),p.createElement(F,{isLoading:r},p.createElement("h1",{className:"text-center"},"Thanks, ",null==l?void 0:l.name,"!"),p.createElement("p",{className:"text-center"},"You responded correctly to ",null==(e=null==l?void 0:l.progress)?void 0:e.correct," out of"," ",null==(t=null==l?void 0:l.progress)?void 0:t.total," questions"),p.createElement("div",{className:"flex justify-center"},p.createElement("div",{className:"mx-3"},p.createElement(A,{onClick:()=>{(null==l?void 0:l.quizId)&&(null==l?void 0:l.name)&&s(l).then((({id:e,quizId:t})=>a.push(`/${e}/quiz/${t}/question`)))}},"Retry")),p.createElement("div",{className:"mx-3"},p.createElement(A,{onClick:()=>a.push("/")},"Next Quiz"))))};function U(){return p.createElement("div",{className:"!container prose lg:prose-xl h-full w-full mx-auto flex flex-col flex-grow flex-shrink-0 items-center justify-center py-16 px-4"},p.createElement(j,null,p.createElement(y,null,p.createElement(w,null,p.createElement(N,{path:"/",component:R,exact:!0}),p.createElement(N,{path:"/:id/quiz/:quizId/question/:questionId?",component:H,exact:!0}),p.createElement(N,{path:"/:id/quiz/:quizId/result",component:K,exact:!0})))))}const V=new I({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:!1,staleTime:18e5}}});z.render(p.createElement(p.StrictMode,null,p.createElement(S,{client:V},p.createElement($.exports.ReactQueryDevtools,{initialIsOpen:!1}),p.createElement(U,null))),document.getElementById("root"));
